# 商品预定页面说明

## 页面功能概述

商品预定页面是小程序的首页，用户可以浏览可预订的商品，进行搜索筛选，并提交预定订单。

## 主要功能

### 1. 商品搜索
- **搜索框**: 支持按商品名称搜索
- **实时搜索**: 输入时实时过滤结果
- **清除功能**: 一键清除搜索关键词

### 2. 分类筛选
- **快捷分类**: 卫生纸、发夹、零食、饮料、日用品等
- **横向滚动**: 分类标签支持横向滚动浏览
- **视觉反馈**: 选中分类有渐变背景效果

### 3. 商品展示
- **卡片布局**: 每个商品以卡片形式展示
- **库存显示**: 实时显示可用库存数量
- **价格信息**: 清晰的单价和单位显示
- **分类标签**: 显示商品所属分类

### 4. 预定功能
- **预定弹窗**: 点击预定按钮弹出详细信息表单
- **数量选择**: 支持增减按钮或直接输入
- **配送时间**: 日期时间选择器（最早1小时后）
- **配送地址**: 多行文本输入详细地址
- **联系电话**: 手机号码格式验证
- **备注信息**: 可选的特殊要求说明
- **费用计算**: 实时计算预定总价

## 页面设计特点

### 视觉设计
- **渐变背景**: 淡雅的蓝紫色渐变背景
- **卡片风格**: 圆角阴影卡片设计
- **色彩搭配**: 主色调为 #667eea 蓝紫色
- **图标装饰**: 使用 emoji 作为分类和状态图标

### 交互体验
- **平滑动画**: 所有交互都有平滑过渡动画
- **点击反馈**: 按钮点击有缩放和阴影变化
- **加载状态**: 加载时显示旋转动画
- **空状态**: 无商品时显示友好的空状态提示

### 响应式设计
- **适配不同屏幕**: 支持不同尺寸的手机屏幕
- **横向滚动**: 分类标签在小屏幕上可横向滚动
- **弹窗适配**: 预定弹窗自适应屏幕大小

## 数据结构

### 商品数据
```javascript
{
  id: 1,                    // 商品ID
  name: '抽纸',            // 商品名称
  category: 'paper',       // 商品分类
  stock: 50,               // 库存数量
  price: 2.50,             // 单价
  unit: '包',              // 单位
  image: '/images/xxx.png'  // 商品图片
}
```

### 分类数据
```javascript
{
  id: 'paper',    // 分类ID
  name: '卫生纸',  // 分类名称
  icon: '🧻'      // 分类图标
}
```

### 预定订单数据
```javascript
{
  openid: '用户openid',           // 用户标识
  productId: 1,                  // 商品ID
  productName: '抽纸',           // 商品名称
  quantity: 2,                   // 预定数量
  price: 2.50,                   // 单价
  totalPrice: '5.00',            // 总价
  deliveryTime: '2023-12-28 14:00', // 配送时间
  deliveryAddress: '详细地址',     // 配送地址
  contactPhone: '13800138000',   // 联系电话
  remark: '备注信息',            // 备注
  orderTime: '2023-12-28T10:00:00.000Z' // 下单时间
}
```

## 后台接口需求

### 1. 获取可预订商品列表
```
GET /api/inventory/available
响应: [
  {
    id: 1,
    name: '抽纸',
    category: 'paper',
    stock: 50,
    price: 2.50,
    unit: '包',
    image: '/images/xxx.png'
  }
]
```

### 2. 提交预定订单
```
POST /api/order/reserve
请求体: 预定订单数据
响应: {
  code: 200,
  message: '预定成功',
  data: {
    orderId: '订单ID'
  }
}
```

## 用户体验优化

1. **无感知登录**: 自动检测登录状态，未登录用户友好提示
2. **库存实时显示**: 商品卡片直接显示库存数量
3. **数量限制**: 预定数量不超过可用库存
4. **时间限制**: 配送时间最早选择1小时后
5. **格式验证**: 手机号格式自动验证
6. **费用透明**: 实时显示费用明细
7. **操作反馈**: 所有操作都有明确的成功/失败反馈

## 页面文件结构

```
pages/reserve/
├── reserve.js     // 页面逻辑
├── reserve.wxml   // 页面结构
├── reserve.wxss   // 页面样式
└── reserve.json   // 页面配置
```

## 注意事项

1. **图片资源**: 需要准备商品默认图片
2. **网络请求**: 确保后台接口正常运行
3. **用户权限**: 预定功能需要用户登录
4. **数据验证**: 前端和后端都要进行数据验证
5. **错误处理**: 完善的错误处理和用户提示