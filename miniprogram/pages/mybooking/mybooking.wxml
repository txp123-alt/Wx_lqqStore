<view class="mybooking-container">
  <!-- 筛选标签 -->
  <view class="filter-tabs">
    <view class="tab-item {{activeTab === item.key ? 'active' : ''}}" 
          wx:for="{{filterTabs}}" 
          wx:key="key" 
          data-key="{{item.key}}" 
          bindtap="switchFilterTab">
      {{item.name}}
    </view>
  </view>

  <!-- 预定列表 -->
  <scroll-view class="booking-scroll" scroll-y="true">
    <view class="booking-list">
      <view class="booking-item" wx:for="{{myBookings}}" wx:key="id">
        <view class="booking-header">
          <view class="product-info">
            <image class="product-image" src="{{item.productImage || '/images/default-product.png'}}" mode="aspectFill"></image>
            <view class="product-details">
              <text class="product-name">{{item.productName}}</text>
              <text class="seller-name">{{item.sellerName}}</text>
            </view>
          </view>
          <view class="booking-status status-{{item.status}}">
            {{item.statusText}}
          </view>
        </view>
        
        <view class="booking-body">
          <view class="booking-info">
            <view class="info-row">
              <text class="label">预定数量:</text>
              <text class="value">{{item.quantity}}</text>
            </view>
            <view class="info-row">
              <text class="label">单价:</text>
              <text class="value price">¥{{item.price}}</text>
            </view>
            <view class="info-row">
              <text class="label">总价:</text>
              <text class="value total-price">¥{{item.totalPrice}}</text>
            </view>
            <view class="info-row">
              <text class="label">预定时间:</text>
              <text class="value">{{item.bookingTime}}</text>
            </view>
          </view>
        </view>
        
        <view class="booking-footer">
          <button class="btn-detail" 
                  size="mini" 
                  bindtap="viewDetail" 
                  data-id="{{item.id}}">
            查看详情
          </button>
          <button class="btn-cancel" 
                  size="mini" 
                  wx:if="{{item.status === 'pending'}}"
                  bindtap="cancelBooking" 
                  data-id="{{item.id}}">
            取消预定
          </button>
          <button class="btn-rebook" 
                  size="mini" 
                  wx:if="{{item.status === 'cancelled'}}"
                  bindtap="reBook" 
                  data-product-id="{{item.productId}}">
            重新预定
          </button>
        </view>
      </view>
      
      <!-- 空状态 -->
      <view class="empty-state" wx:if="{{myBookings.length === 0 && !loading}}">
        <text class="empty-icon">📋</text>
        <text class="empty-text">暂无预定记录</text>
        <text class="empty-desc">去逛逛其他小摊，预订喜欢的商品吧</text>
        <button class="btn-go-booking" 
                size="mini" 
                bindtap="goToBooking">
          去预订
        </button>
      </view>
      
      <!-- 加载状态 -->
      <view class="loading-more" wx:if="{{loading}}">
        <text class="loading-text">加载中...</text>
      </view>
      
      <!-- 没有更多 -->
      <view class="no-more" wx:if="{{!hasMore && myBookings.length > 0}}">
        <text class="no-more-text">没有更多记录了</text>
      </view>
    </view>
  </scroll-view>
</view>